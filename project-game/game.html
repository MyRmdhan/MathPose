<!DOCTYPE html>
<html lang="id">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game - Math Pose Dance</title>
    <link rel="stylesheet" href="style.css" />
    <script>
      window.addEventListener("DOMContentLoaded", () => {
        const audio = document.getElementById("backsound");

        // Coba play saat DOM siap
        audio.volume = 0.2;
        audio.play().catch(() => {
          // Kalau gagal autoplay, tunggu interaksi user pertama
          window.addEventListener(
            "click",
            () => {
              audio.play();
            },
            { once: true }
          );
        });
      });
    </script>
  </head>
  <body>
    <audio id="backsound" src="sounds/backsounds.mp3" autoplay loop></audio>

    <a href="guide.html" class="back-button">‚ùì Cara Bermain</a>

    <h1>Math Pose Dance Game</h1>
    <div class="video-container"></div>
    <div id="webcam-container"></div>
    <div id="pose-label">
      Pose: <span id="pose">normal</span> (<span id="conf">0%</span>)
    </div>

    <!-- Pilihan Kategori -->

    <div class="game-box no-bg">
      <!-- Intro Game Box -->
      <div id="kategori-screen" class="kategori-container">
        <h2>Pilih Kategori Kelas</h2>
        <div class="kategori-buttons">
          <button onclick="pilihKategori('sd')" class="kategori-btn">SD</button>
          <button onclick="pilihKategori('smp')" class="kategori-btn">
            SMP
          </button>
          <button onclick="pilihKategori('sma')" class="kategori-btn">
            SMA
          </button>
        </div>
      </div>

      <div id="intro-screen">
        <p>Klik Start untuk mulai bermain</p>
        <button id="game-start-button">Mulai</button>
        <button id="back-to-kategori" class="kategori-btn kecil">
          ‚Üê Kembali ke Kategori
        </button>
        <div id="riwayat-container">
          <h2>Riwayat Bermain</h2>
          <div id="riwayat-sd">
            <h3>SD</h3>
            <ul id="log-sd"></ul>
          </div>
          <div id="riwayat-smp">
            <h3>SMP</h3>
            <ul id="log-smp"></ul>
          </div>
          <div id="riwayat-sma">
            <h3>SMA</h3>
            <ul id="log-sma"></ul>
          </div>
        </div>
      </div>

      <!-- Countdown -->
      <div id="game-countdown" style="display: none">
        <p>Mulai dalam:</p>
        <h2 id="countdown-number">3</h2>
      </div>

      <!-- Konten soal -->
      <div id="game-content" style="display: none">
        <p id="timer">üïí Waktu: 01:00</p>
        <p id="question">Soal akan muncul di sini</p>
        <ul id="choices"></ul>
        <p id="status"></p>
        <p id="skor">Skor: <span id="score">0</span></p>
        <div id="game-over" style="display: none">
          <p id="final-score"></p>
          <button id="restart-button">üîÅ Main Lagi</button>
        </div>
      </div>
    </div>

    <!-- Sound -->
    <audio id="benar-sound" src="sounds/benar.wav"></audio>
    <audio id="salah-sound" src="sounds/salah.wav"></audio>
    <audio id="game-backsound" src="sounds/backsound.mp3" loop></audio>

    <!-- Scripts -->
    <script src="./lib/tf.min.js"></script>
    <script src="./lib/teachablemachine-pose.min.js"></script>
    <script src="script.js"></script>
  </body>
</html>
